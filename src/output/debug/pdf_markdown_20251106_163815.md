
================================================================================
ドキュメント: プログラム基本設計書_B145_累積作成_サブグループ別部品情報リストPDFファイルレコード生成_AI審査.pdf (PDF 1)
ファイル名: プログラム基本設計書_B145_累積作成_サブグループ別部品情報リストPDFファイルレコード生成_AI審査.pdf
================================================================================

要求No 要求内容 (ペルソナ: 指令)

評価 (〇/△/×) 適合/不適合箇所

適合/不適合理由

修正案 (ゴールデンケースを含む)

対応有無 対応方法／非対応理由

SA-1

SystemArchitect: 指摘事項への
準拠 (API定義の変更)

〇

API定義

V7からV8にかけてAPIシグネチャが変更されています。特に、BeforeメソッドにLogUtilインスタ
ンスを渡すように変更され、Afterメソッドがout引数でメッセージを返すように修正されていま
す。
これは依存性の注入（DI）の考え方を取り入れ、ログ処理を外部から制御可能にする良い変
更です。また、戻り値の設計もよりC#の慣例に沿ったものに改善されています。

この改善方針を維持してください。

×

SA-2

SystemArchitect: 論理トレーサ
ビリティの検証 (処理フローの明
確化)

〇

2.1 前処理段階
(Before)の結果判定

V8で「前処理段階（Before）で Error が発生した場合、本処理段階(Main) の実行を スキップ
します」という記述が追加されました。これにより、Before→Main→Afterの各段階の連携と異
常時の制御フローが明確になり、設計の堅牢性が向上しています。

正常系のフローだけでなく、このように異常系のフローを明記するスタイルは、実
装時の誤解を防ぐために非常に有効です。

×

SA-3

SystemArchitect: 機能要件と非
機能要件の分離と結合 (チェック
項目の削除)

△

1.4 入力ファイルチェッ
ク

V7に存在した「1.4.1 入力ファイル名が命名規則に従っているかのチェック」(ExitCode: 244)が
V8では削除されています。このチェックが不要になったのか、あるいは別のコンポーネント
（例：振分モジュール）に責務が移譲されたのかが不明です。
設計変更の意図がドキュメントから読み取れないため、手戻りや予期せぬ不具合のリスクが
あります。

変更履歴や注釈として、チェック項目を削除した理由を明記してください。
例：「本チェックは上位の振分モジュールで実施するため、プラグイン側では不要
と判断。」

×

　V7の設計（ファイル名チェックを含む）は責務の分離に違反していたため、V8で意図的に
削除した。本プラグインの責務はファイル内容の検証であり、ファイル名の検証は呼び出し
元（振分モジュール）の責務である。アーキテクチャ方針の正当性に基づき、本件（注記の追
記）は対応しない。

QA-1

QAManager: 処理ロジックの具体
性評価 (WDT分析)

△

2.2.1 指定列の加工処
理

「PDFファイルのファイル名から、指定のマクロ変数で車の情報を取って、指定スキーマレイア
ウトにコンバートする」という記述は、What(何をするか)は分かりますが、How(どうやるか)が具
体性に欠けます。
特に「マクロ変数」（例: !FS_CAR_MODEL!）がファイル名のどの部分から、どのようなルール
（正規表現など）で抽出されるのかが不明です。これではテスト担当者がファイル名のパター
ンを網羅したテストデータを作成できません。

【ゴールデンケース】
ファイル名の命名規則を具体的に示し、各マクロ変数がどの部分に対応するか
を明記してください。
例：ファイル名形式: `[車両モデル]_[類別コード]_[メイングループ]_[サブグルー
プ].pdf`
`!FS_CAR_MODEL!` はファイル名の最初の `_` までの部分文字列を抽出する、な
ど。

×

　AI審査員は本プラグインの設計を根本的に誤解している。本プラグインのルールは動的
（Dynamic）であり、審査員が提案するような静的（Static）なルール ではない。

ただし、ご指摘の通り、2.2.1節の「PDFファイルのファイル名から...」 という記述は誤解を招く
ため修正する。修正後の仕様は「本プラグインはファイル名の解析を行わない。マクロ変数
値は、呼び出し元（Host）からpluginParamJson引数を通じて渡される」とする。

QA-2

QAManager: 用語と定義の明確
化

△

1.3 入力引数の内容
チェック, 1.3.1 項目ID
チェック

「LineageID」「リソース管理テーブル」「転記仕様 YAML（transformYamlInfoDic）」といった外部
の定義に依存する用語が説明なく使用されています。これらの情報がどこで管理されており、
どのような構造を持っているのかがこの設計書単体では不明です。
テストの前提条件を準備する際に、これらの情報を別途探す必要があり、非効率です。

各用語について、参照すべきドキュメント名や管理場所を明記してください。もしく
は、この設計書内でテストに必要な範囲で、簡単な構造や役割を説明するセク
ションを追加してください。例：「リソース管理テーブルの詳細は『共通仕様書_
データ管理.xlsx』を参照のこと。」

×

　ご指摘の用語（「LineageID」「リソース管理テーブル」等）は、本システムにおける共通の定
義である。これらは共通仕様書で一元管理されており、個別のプラグイン設計書で重複して
定義・参照することは、管理の複雑化を招くため行わない。

QA-3

QAManager: 異常系の網羅性 (ロ
グ出力仕様の変更)

×

1.1 起動ログ情報の出
力, 1.3.1 項目IDチェッ
ク など

V7ではエラーログがメッセージID（例: CE0020_MissingRequiredItemInSchema）で管理されて
おり、テストの自動化やログ監視ツールでの特定が容易でした。しかしV8では自由なテキスト
形式（例: ERROER タイプ： ...）に変更されています。
これにより、ログメッセージの文言が将来変更された場合にテストコードや監視設定の修正が
必要となり、保守性が低下します。また、`ERROER`というスペルミスも存在します。

ログ出力の仕様をV7のメッセージID方式に戻すことを強く推奨します。もしテキス
ト形式を維持する場合は、出力されるメッセージのテンプレートを固定し、変数部
分以外は変更されないことを保証するルールを設けてください。また、`ERROER`
は`ERROR`に修正してください。

QA-4

QAManager: 異常系の網羅性 (エ
ラーハンドリング)

〇

2.2.2 エラーデータの
処理

エラーハンドリングモードとして `resume`, `skip`, `terminate` の3種類が定義され、それぞれ
の挙動と対応するExitCodeが明記されています。
これにより、エラー発生時のシステムの振る舞いが明確になり、テストケースの設計が容易に
なります。

この定義は明確で良いです。維持してください。

　V7のメッセージID方式 からV8のテキスト形式 への変更は、ログの柔軟性向上を目的とし
たシステム全体の意図的なアーキテクチャ変更であるため、V7の仕様に戻す ことは行わな
い。

ただし、スペルミス（ERROER）はERRORに修正する。

△

×





================================================================================
ドキュメント: プログラム基本設計書_B145_累積作成_サブグループ別部品情報リストPDFファイルレコード生成_処理詳細_V9.pdf (PDF 2)
ファイル名: プログラム基本設計書_B145_累積作成_サブグループ別部品情報リストPDFファイルレコード生成_処理詳細_V9.pdf
================================================================================

3-1.処理詳細説明(全体)

システム名 f013カタログ部品データ作成
業務機能名 累積作成ツール

プログラムID f013-subgrp-parts-list-pdf-record-gen プログラム名称 サブグループ別部品情報リストPDFファイルレコード生成

システムID
バージョン
プロジェクトNo

作成日
更新日

12170130-00

2025/1/8
2025/10/30
区分

作成者
更新者

3H.尚坤
3H.尚坤

専用

詳細内容

・解析プラグイン定義

振分モジュールでは、JSON形式の引数をもとに必要な情報を抽出し、部品一覧PDFファイルを読み込みます。

各プラグインは、以下の3段階処理（Before／Main／After）を通じてデータ解析を実施する。

前処理段階 (Before)
本処理段階 (Main)
後処理段階 (After)

実行環境の初期化、入力パラメータ（JSON）の解析、指定ファイルの存在チェック等を行う。
部品一覧PDFァイルを読み込み、解析結果をレコード単位でコールバック関数へ返却する。
処理結果の集計およびリソース解放を行い、最終的な終了コード（ExitCode）とメッセージ情報を返却する。

・API定義

public Before(string pluginParamJson,LogUtil logUtil)

パラメータ：

pluginParamJson

logUtil(cid:9)(cid:9)(cid:9)(cid:9)(cid:9)(cid:9)(cid:9)(cid:9)

戻り値：
なし

プラグイン実行に必要な情報を格納したJSON文字列。
※詳細レイアウトは「プログラム基本設計書_プラグイン振分モジュール_解析加工IF定義」を参照。

LogUtilインスタンス
※ログ出力を行うための LogUtil インスタンス。

public Main(Action<DataRow> onDataRow)

パラメータ：

onDataRow

戻り値：
なし

レコードを逐次返却する用コールバック
※読み取ったレコードを一つずつ返却するコールバック

Public int After(out string jsonMessage)

パラメータ：

jsonMessgae

戻り値：

異常ありの場合、最後に発生したエラーのメッセージをJSON形式で返却する引数
DataLineageExecuteLogのdetail_message情報を更新するために使用される。

＞　正常完了の場合、 ExitCode=0
＞　異常発生の場合、最後に発生したエラーの ExitCode

・処理詳細

1. 前処理段階 (Before)

実行環境の初期化、入力パラメータ（JSON）の解析、指定ファイルの存在チェック等を行う。

1.1 起動ログ情報の出力

プラグインの実行開始ログを出力する

メッセージ内容:

INFORMATION タイプ： 「サブグループ別部品情報リストPDFファイルレコード生成」プラグインを開始します...

プロセスログ

PROCESS タイプ： 前処理(Beforeメソッド) 実行

1.2 入力引数の解析

引数 pluginParamJson のJSON形式文字列から、使用する情報を解析します。

プロセスログ

PROCESS タイプ： 引数(JSON)内容の解析

1.3 入力引数の内容チェック

指定された Input スキーマファイルに対して、柔軟に対応できるように、最小限の妥当性チェックだけを実施します。
LineageID をもとに転記仕様 YAML（transformYamlInfoDic）から該当のInputスキーマファイルを取得します。

改訂No. 削

6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6

6
6
6

6
6

6
6
6
6

必要な項目IDが含まれているかを確認します。

プロセスログ

PROCESS タイプ： リネージ設定情報チェック 実行

1.3.1  項目IDチェック

・チェック対象は、必須項目である「項目ID」(item_id) の存在確認に限定します。
＞　Inputスキーマファイルに、定義された必須項目 IDが存在しない場合、

エラーログを出力する（ExitCode：253）

メッセージ内容:

ERROR タイプ： 当リネージID「{lineageID}」の「リソース管理テーブル」にて、指定されたInputスキーマYamlファイル:「{inputSchemaPath}」に、必須項目「{undefinedRequiredColumnList}」がないです。

必須項目一覧（本プラグインで定義される項目）。

項目№
1
2
3
4
5
・それ以外の項目（例：項目名、項目順、型、項目長など）については、個別の検証は行いません。

項目名
f013・車両モデル
f013・類別コード
f013・メイングループ
f013・サブグループコード
f013・サブグループ別部品情報リストPDFフルパス

項目ID
f013_car_model
f013_car_model_classification_code
f013_main_group_code
f013_sub_group_code
f013_subgrp_parts_list_pdf_full_path

1.4 入力ファイルチェック

プロセスログ

PROCESS タイプ：サブグループ別部品情報リストPDFファイル「{pdfFilePath}」のチェック 実行

1.4.1 入力ファイル命名規則に必須のマクロ変数が含まれているかのチェック
＞ 入力ファイル命名規則に必須マクロ変数が定義されていない場合：

エラーログを出力する（ExitCode：252）

ERROR タイプ： 当リネージID「{lineageId}」の「リソース管理」テーブルにて、指定された入力ファイル命名規則「{fileNameRule}」に必須マクロ変数「{macroName}」がないです。

1.4.2 入力ファイルの存在チェック

＞　入力ファイルが存在しない場合：

エラーログを出力する（ExitCode：245）

メッセージ内容:

ERROR タイプ： 対象データファイル「{pdfFilePath}」が見つかりません。

1.4.3 PDFファイル 0 バイトチェック

＞ 入力データとしてPDFファイルのサイズを確認し、0 バイトの場合は破損ファイルと見なして処理を中断、

エラーログを出力する（ExitCode：243）

メッセージ内容:

ERROR タイプ： 対象データファイル「{pdfFilePath}」が0バイトで、累積処理を実行できません。

1.5 Before段階の例外処理

前処理段階(Before)にて、予期しない例外が発生した場合の処理を以下に示します。

例外発生時、以下の3条のエラーログを出力します：

ERROR タイプ： Before段階でエラーが発生しました。ファイル: {excelFilePath}
ERROR タイプ： {ex.Message}
ERROR タイプ： {ex.StackTrace}

2. 本処理段階 (Main)

部品一覧PDFファイルを読み込み、解析結果をレコード単位でコールバック関数へ返却する。

2.1 前処理段階 (Before)の結果判定:

ExitCode 情報に基づき、前処理段階（Before）の実行結果を判断します。

> 前処理段階（Before）で Error が発生した場合

6
6
6
6

6
6

6
6
6
6

6
6
6
6

6
6
6
6
6
6
6

6
6

6
6
6
6

6
6

本処理段階(Main) の実行を スキップ します。
プロセスは直接後処理段階（After）に移行し、該当する例外結果を返却します。

PROCESS タイプ： Before処理でエラーが発生したため、Main処理をスキップします。ExitCode: {exitCode}

> 前処理段階（Before）で Error が発生しなかった場合

後続処理を 続行 します。

2.2 Inputスキーマ構造データの構築

PDFファイルのパスを取得し、指定されたInputスキーマレイアウトに変換する処理を行い、その結果をコールバック方式でexe側に戻します。

プロセスログ

PROCESS タイプ：本処理（Mainメソッド） 実行

入力ファイル情報を出力します。

INFORMATION タイプ： サブグループ別部品情報リストPDFファイル: {pdfFilePath}

2.2.1 指定列の加工処理

PDFファイルのファイル名から、指定のマクロ変数で車の情報を取って、指定スキーマレイアウトにコンバートする。

・下記項目の値を固定値に設定します

1
2
3
4
5

f013_car_model
f013_car_model_classification_code
f013_main_group_code
f013_sub_group_code
f013_subgrp_parts_list_pdf_full_path

←
←
←
←
←

PDFファイル名から車両モデル「!FS_CAR_MODEL!」
PDFファイル名から類別コード「!FS_CAR_MODEL_CLSSFN!」
PDFファイル名からメイングループコード「!FS_MAINGRP_CD!」
PDFファイル名からサブグループコード「!FS_SUBGRP_CD!」
PDFファイルのパス情報

※Inputスキーマレイアウトが上記定義内容と異なる場合の対応：
  ・項目長の変更

元データの長さチェックをしなくて、呼出し側のコンバート処理にて実施する。プラグイン側に特に何もする必要なし

  ・項目データ型の変更

元データの型チェックをしなくて（object 型として扱うため）、呼出し側のコンバート処理にて実施する。プラグイン側に特に何もする必要なし

  ・新規項目の場合、

上記にない項目については、このプラグインで値をセットしない場合、Inputスキーマで定義されたタイプに応じた初期値が設定されます。
別の初期値が必要な場合は、このプラグインのソースコードを変更する必要があります。

27

f013_xxxx_aaa

2.2.2 エラーデータの処理

←

項目のタイプに応じた初期値を設定
※詳細は、ルールブックのシート「4)データの転記」内の「4　スキーマYAML定義におけるデータ型別初期値」を参照。

行(レコード)単位で、異常が発生すると、最後の異常内容をキャシューして、ブラグインの実行結果として処理する。(Afterメソッドで戻します)

レコードのエラーは、エラーハンドリング設定に従って対応されます。

まず、異常行のログ出力し、プラグインの実行結果メッセージ、ExitCodeも更新しておいて

ExitCodeも、エラーハンドリングによってセットする。

エラーハンドリングモード一覧
エラーハンドリング

resume

skip

terminate

処理方法
エラーレコードをスキップし、次のレコードから処理を続行します。（ExitCode：124）
エラーメッセージを出力し
現在ファイルをスキップします。（ExitCode：124）
エラーメッセージを出力し
エラーメッセージを出力し、全処理を終了します。（ExitCode：255）

2.3 解析結果の返却

LineageIDに対応する入力スキーマレイアウトに従い、DataRow形式の解析結果データをコールバック方式（onDataRow）で呼び出し元に逐次返却します。

2.4 Main段階の例外処理

処理段階(Main)にて、予期しない例外が発生した場合の処理を以下に示します。
ERROR タイプ： Main段階でエラーが発生しました。ファイル: {excelFilePath}

ERROR タイプ： {ex.Message}
ERROR タイプ： {ex.StackTrace}

例外発生の有無に関わらず、以下の処理を実行します

件数統計ログの出力

INFORMATION タイプ： 正常件数：{normalCount}
INFORMATION タイプ： 異常件数：{errorCount}

3. 後処理段階 (After)

処理結果の集計およびリソース解放を行い、最終的な終了コード（ExitCode）とメッセージ情報を返却する。

プロセスログ

PROCESS タイプ：後処理（Afterメソッド） 実行

3.1 処理完了時に、実行結果ログを出力する。

メッセージ:

> 正常完了

INFORMATION タイプ： 「サブグループ別部品情報リストPDFファイルレコード生成」が正常完了しました。

> 異常終了

ERROR タイプ： 「サブグループ別部品情報リストPDFファイルレコード生成」が異常終了しました。

3.2 ExitCodeおよびメッセージ情報の返却

＞　正常完了の場合、 ExitCode=0 を返却する
＞　異常発生の場合、最後に発生したエラーの ExitCode およびエラー情報を返却する

6
6
6

6
6
6
6
6
6
6
6

6
6





================================================================================
ドキュメント: プログラム基本設計書_B145_累積作成_サブグループ別部品情報リストPDFファイルレコード生成_処理詳細_V8.pdf (PDF 3)
ファイル名: プログラム基本設計書_B145_累積作成_サブグループ別部品情報リストPDFファイルレコード生成_処理詳細_V8.pdf
================================================================================

3-1.処理詳細説明(全体)

システム名 f013カタログ部品データ作成
業務機能名 累積作成ツール

プログラムID f013-subgrp-parts-list-pdf-record-gen プログラム名称 サブグループ別部品情報リストPDFファイルレコード生成

システムID
バージョン
プロジェクトNo

作成日
更新日

12170130-00

2025/1/8
2025/10/30
区分

作成者
更新者

3H.尚坤
3H.尚坤

専用

詳細内容

・解析プラグイン定義

振分モジュールでは、JSON形式の引数をもとに必要な情報を抽出し、部品一覧PDFファイルを読み込みます。

各プラグインは、以下の3段階処理（Before／Main／After）を通じてデータ解析を実施する。

前処理段階 (Before)
本処理段階 (Main)
後処理段階 (After)

実行環境の初期化、入力パラメータ（JSON）の解析、指定ファイルの存在チェック等を行う。
部品一覧PDFァイルを読み込み、解析結果をレコード単位でコールバック関数へ返却する。
処理結果の集計およびリソース解放を行い、最終的な終了コード（ExitCode）とメッセージ情報を返却する。

・API定義

public Before(string pluginParamJson,LogUtil logUtil)

パラメータ：

pluginParamJson

logUtil(cid:9)(cid:9)(cid:9)(cid:9)(cid:9)(cid:9)(cid:9)(cid:9)

戻り値：
なし

プラグイン実行に必要な情報を格納したJSON文字列。
※詳細レイアウトは「プログラム基本設計書_プラグイン振分モジュール_解析加工IF定義」を参照。

LogUtilインスタンス
※ログ出力を行うための LogUtil インスタンス。

public Main(Action<DataRow> onDataRow)

パラメータ：

onDataRow

戻り値：
なし

レコードを逐次返却する用コールバック
※読み取ったレコードを一つずつ返却するコールバック

Public int After(out string jsonMessage)

パラメータ：

jsonMessgae

戻り値：

異常ありの場合、最後に発生したエラーのメッセージをJSON形式で返却する引数
DataLineageExecuteLogのdetail_message情報を更新するために使用される。

＞　正常終了の場合、 ExitCode=0
＞　異常発生の場合、最後に発生したエラーの ExitCode

・処理詳細

1. 前処理段階 (Before)

実行環境の初期化、入力パラメータ（JSON）の解析、指定ファイルの存在チェック等を行う。

1.1 起動ログ情報の出力

プラグインの実行開始ログを出力する

メッセージ内容:

INFO タイプ： 「サブグループ別部品情報リストPDFファイルレコード生成」プラグインを開始します...

プロセスログ

PROCESS タイプ： 前処理(Beforeメソッド) 実行

1.2 入力引数の解析

引数 pluginParamJson のJSON形式文字列から、使用する情報を解析します。

プロセスログ

PROCESS タイプ： 引数(JSON)内容の解析

1.3 入力引数の内容チェック

指定された Input スキーマファイルに対して、柔軟に対応できるように、最小限の妥当性チェックだけを実施します。
LineageID をもとに転記仕様 YAML（transformYamlInfoDic）から該当のInputスキーマファイルを取得します。
必要な項目IDが含まれているかを確認します。

改訂No. 削

6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6
6

6
6
6

6
6

6
6
6
6

プロセスログ

PROCESS タイプ： リネージ設定情報チェック 実行

1.3.1  項目IDチェック

・チェック対象は、必須項目である「項目ID」(item_id) の存在確認に限定します。
＞　Inputスキーマファイルに、定義された必須項目 IDが存在しない場合、

エラーログを出力する（ExitCode：253）

メッセージ内容:

ERROER タイプ： 当リネージID「{lineageID}」の「リソース管理テーブル」にて、指定されたInputスキーマYamlファイル:「{inputSchemaPath}」に、必須項目「{undefinedRequiredColumnList}」がないです。

必須項目一覧（本プラグインで定義される項目）。

項目№
1
2
3
4
5
・それ以外の項目（例：項目名、項目順、型、項目長など）については、個別の検証は行いません。

項目名
f013・車両モデル
f013・類別コード
f013・メイングループ
f013・サブグループコード
f013・サブグループ別部品情報リストPDFフルパス

項目ID
f013_car_model
f013_car_model_classification_code
f013_main_group_code
f013_sub_group_code
f013_subgrp_parts_list_pdf_full_path

1.4 入力ファイルチェック

プロセスログ

PROCESS タイプ：サブグループ別部品情報リストPDFファイル「{pdfFilePath}」のチェック 実行

1.4.1 入力ファイル命名規則に必須のマクロ変数が含まれているかのチェック
＞ 入力ファイル命名規則に必須マクロ変数が定義されていない場合：

エラーログを出力する（ExitCode：252）

ERROR タイプ： 当リネージID「{lineageId}」の「リソース管理」テーブルにて、指定された入力ファイル命名規則「{fileNameRule}」に必須マクロ変数「{macroName}」がないです。

1.4.2 入力ファイルの存在チェック

＞　入力ファイルが存在しない場合：

エラーログを出力する（ExitCode：245）

メッセージ内容:

ERROER タイプ： 対象データファイル「{pdfFilePath}」が見つかりません。

1.4.3 PDFファイル 0 バイトチェック

＞ 入力データとしてPDFファイルのサイズを確認し、0 バイトの場合は破損ファイルと見なして処理を中断、

エラーログを出力する（ExitCode：243）

メッセージ内容:

ERROER タイプ： 対象データファイル「{pdfFilePath}」が0バイトで、累積処理を実行できません。

2. 本処理段階 (Main)

部品一覧PDFファイルを読み込み、解析結果をレコード単位でコールバック関数へ返却する。

2.1 前処理段階 (Before)の結果判定:

ExitCode 情報に基づき、前処理段階（Before）の実行結果を判断します。

> 前処理段階（Before）で Error が発生した場合

本処理段階(Main) の実行を スキップ します。
プロセスは直接後処理段階（After）に移行し、該当する例外結果を返却します。

> 前処理段階（Before）で Error が発生しなかった場合

後続処理を 続行 します。

2.2 Inputスキーマ構造データの構築

プロセスログ

PROCESS タイプ：本処理（Mainメソッド） 実行

6
6
6
6

6
6

6
6
6
6

6
6
6
6

6
6
6
6
6
6
6
6
6
6
6
6
6

2.2.1 指定列の加工処理

PDFファイルのファイル名から、指定のマクロ変数で車の情報を取って、指定スキーマレイアウトにコンバートする。

・下記項目の値を固定値に設定します

1
2
3
4
5

f013_car_model
f013_car_model_classification_code
f013_main_group_code
f013_sub_group_code
f013_subgrp_parts_list_pdf_full_path

←
←
←
←
←

PDFファイル名から車両モデル「!FS_CAR_MODEL!」
PDFファイル名から類別コード「!FS_CAR_MODEL_CLSSFN!」
PDFファイル名からメイングループコード「!FS_MAINGRP_CD!」
PDFファイル名からサブグループコード「!FS_SUBGRP_CD!」
PDFファイルのパス情報

※Inputスキーマレイアウトが上記定義内容と異なる場合の対応：
  ・項目長の変更

元データの長さチェックをしなくて、呼出し側のコンバート処理にて実施する。プラグイン側に特に何もする必要なし

  ・項目データ型の変更

元データの型チェックをしなくて（object 型として扱うため）、呼出し側のコンバート処理にて実施する。プラグイン側に特に何もする必要なし

  ・新規項目の場合、

上記にない項目については、このプラグインで値をセットしない場合、Inputスキーマで定義されたタイプに応じた初期値が設定されます。
別の初期値が必要な場合は、このプラグインのソースコードを変更する必要があります。

27

f013_xxxx_aaa

2.2.2 エラーデータの処理

←

項目のタイプに応じた初期値を設定
※詳細は、ルールブックのシート「4)データの転記」内の「4　スキーマYAML定義におけるデータ型別初期値」を参照。

レコードのエラーは、エラーハンドリング設定に従って対応されます。

エラーハンドリングモード一覧
エラーハンドリング

resume

skip

terminate

2.3 解析結果の返却

処理方法
エラーレコードをスキップし、次のレコードから処理を続行します。（ExitCode：124）
エラーメッセージを出力し
現在ファイルをスキップします。（ExitCode：124）
エラーメッセージを出力し

エラーメッセージを出力し、全処理を終了します。（ExitCode：255）

LineageIDに対応する入力スキーマレイアウトに従い、DataRow形式の解析結果データをコールバック方式（onDataRow）で呼び出し元に逐次返却します。

プロセスログ

正常件数：{normalCount}
異常件数：{errorCount}

3. 後処理段階 (After)

処理結果の集計およびリソース解放を行い、最終的な終了コード（ExitCode）とメッセージ情報を返却する。

プロセスログ

PROCESS タイプ：後処理（Afterメソッド） 実行

3.1 処理完了時に、実行結果ログを出力する。

メッセージ:

> 正常完了

INFO タイプ： 「サブグループ別部品情報リストPDFファイルレコード生成」が正常完了しました。

> 異常終了

ERROR タイプ： 「サブグループ別部品情報リストPDFファイルレコード生成」が異常終了しました。

3.2 ExitCodeおよびメッセージ情報の返却

＞　正常終了の場合、 ExitCode=0 を返却する
＞　異常発生の場合、最後に発生したエラーの ExitCode およびエラー情報を返却する

6
6
6

6
6
6
6
6
6
6
6

6
6


